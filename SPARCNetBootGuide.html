<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>SPARCNetBootGuide</title>
  <style>
    /* Default styles provided by pandoc.
    ** See https://pandoc.org/MANUAL.html#variables-for-html for config info.
    */
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    svg {
      height: auto;
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      border: none;
      border-top: 1px solid #1a1a1a;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
</head>
<body>
<h1
id="jumpstarting-with-a-sparc-netbooting-sun-workstations">Jumpstarting
With a SPARC: Netbooting Sun Workstations</h1>
<h2 id="revision-0"><em>Revision 0</em></h2>
<h2 id="foreword">Foreword</h2>
<p>This document was compiled by me (Europa) in 2024 and contains a
combination of information from others that I have placed here for
posterity (and updated where applicable) and information based on my own
experiences. I would like to thank the many administrators and hobbyists
that came before me and have made it possible for me to use and learn
about my Sun systems in a manner that allows me to create this document
through the recording of their knowledge. I would also like to
specifically thank NCommander and their community for helping me when
limited documentation was available. I hope this document will survive
for years to come and be passed from one hand to the next. Archival and
documentation is important, and I hope that this document aids with that
effort.</p>
<p><em>A note about inline citations: As I said, some of this guide is
taken from other sources. To streamline citation of those sources, I
have put letters in parentheses next to the appropriate section
headings. These correspond to webpages referenced in Appendix C. I do
not wish to take credit for the work of others, and I believe firmly in
crediting sources.</em></p>
<h2 id="abstract">Abstract</h2>
<p>If you’re reading this document, it’s likely that you have been
brought here from a web search or someone linked it as an answer to a
question you or someone else posed. The purpose of this document is,
first and foremost, to provide a consolidated resource for those looking
to boot their Sun workstations from the network based on my findings.
There are many reasons one may wish to do this, including a lack of
physical installation media or a lack of working removable media drives
on the system one wishes to boot.</p>
<p>This document will make a few assumptions, namely that you have a
basic understanding of networking and Unix-like operating systems, as
well as assuming that you have root access (either directly or via su)
to the server system, and that you’ll be working from a root shell. As I
am limited by the hardware I have at my disposal, the procedures listed
in this document have been tested on a SPARCstation 5, an Ultra 1, and
an Ultra 5. That being said, the basics of this document should hold
true for any Sun system that can boot from the network in the same way
that these systems can. I will primarily focus on booting from NetBSD
(and OpenBSD where applicable) and Solaris. If you wish to apply these
instructions to other platforms and operating systems, I have included
the resources I pulled from as well as other useful resources in
Appendix C.</p>
<p>Before you proceed, you must have a few things prepared: - A wired
network. It does not need to be connected to the internet, although it
may be beneficial for some client operating systems. - A system that can
act as a server and a system that you wish to be your client. The server
can be anything capable of wired networking and running an operating
system capable of performing the tasks in this guide. - Your client’s
platform group. If you don’t know this, please refer to Appendix B-i. -
A programmed IDPROM and NVRAM on the client. Unless you have
specifically ensured your timekeeper’s battery has juice left, it’s
likely dead. If you need to program your timekeeper, refer to Appendix
A. If you have all of those things, feel free to proceed to whichever
section is applicable to your goals. Every network and configuration is
different, and you may have to tweak these guides to meet your needs. I
can say these worked on my machines but, as always with things like
this, your mileage may vary. I make no guarantees about any of the stuff
here other than that it has been tested by me to work. I, however, am an
individual and only have so many resources at my disposal, so I cannot
test every possible configuration. I will add more configurations with
server and client operating systems as I test them and, if anyone has
their own configurations that they would like to add, feel free to do so
on Github. Have fun and best of luck.</p>
<h2 id="i.-sunos-4-diskless-install">I. SunOS 4 Diskless Install</h2>
<h2 id="i-a.-netbsdopenbsd-c"><em>I-a. NetBSD/OpenBSD</em> <a
href="#fn1" class="footnote-ref" id="fnref1"
role="doc-noteref"><sup>1</sup></a></h2>
<ol type="1">
<li>Ensure you have the following services enabled in your rc.conf:</li>
</ol>
<ul>
<li>rarpd</li>
<li>bootparams (called bootparamd in rc.conf, but refered to as
bootparams elsewhere)</li>
<li>tftpd (part of inetd, enabled by uncommenting the tftpd line in
/etc/inetd.conf)</li>
<li>nfs_server (in addition to rpcbind, mountd, lockd, and statd)</li>
</ul>
<ol start="2" type="1">
<li>These services are also in /etc/inetd.conf and may be useful to
uncomment (IF you are on a trusted network):</li>
</ol>
<ul>
<li>ftp</li>
<li>telnet</li>
<li>rlogin</li>
<li>rsh</li>
<li>rexec</li>
<li>time</li>
</ul>
<ol start="3" type="1">
<li>Create or modify the /etc/ethers file with your Sun’s ethernet
address and hostname:</li>
</ol>
<pre><code>/etc/ethers:
08:00:20:00:07:EA client</code></pre>
<ol start="4" type="1">
<li>Modify /etc/hosts with the hostname you specified in /etc/ethers and
the IP address you wish to assign your client</li>
</ol>
<pre><code>/etc/hosts:
...
192.168.0.11 client</code></pre>
<ol start="5" type="1">
<li>Make the /tftpboot directory if it doesn’t already exist.</li>
</ol>
<p><code># mkdir /tftpboot</code></p>
<ol start="6" type="1">
<li>Make a directory where you wish to put the contents of the install
CD.</li>
</ol>
<p><code># mkdir /home/client</code></p>
<ol start="7" type="1">
<li>Create or modify the /etc/bootparams file.</li>
</ol>
<pre><code>/etc/bootparams:
installclient root=server:/home/client swap=server:/home/client/swap gateway=server:0xffffff00</code></pre>
<ol start="8" type="1">
<li>Add the location of the copied install CD to /etc/exports.</li>
</ol>
<pre><code>/etc/exports:
/home/client -alldirs -maproot=root</code></pre>
<ol start="9" type="1">
<li><p>Restart (or start) all services listed in Step 1.</p></li>
<li><p>Mount the SunOS 4.1.x CD</p></li>
</ol>
<p><code># mount -t cd9660 -o ro /dev/cd0 /cdrom</code></p>
<ol start="11" type="1">
<li>Set up the client’s filesystem heirarchy and swap file.</li>
</ol>
<pre><code># cd /home/client

# dd if=/dev/zero of=swap bs=&lt;swap size in megabytes&gt;m count=1

# mkdir -p usr/kvm

# tar -xvpf /cdrom/export/exec/proto_root_sunos_4_1_4

`# cd /home/client/usr</code></pre>
<ol start="12" type="1">
<li>Extract the common OS packages.</li>
</ol>
<pre><code># for x in /cdrom/export/exec/sun4_sunos_4_1_4/*; do tar -xpf $x; done

# tar -xpf /cdrom/export/share/sunos_4_1_4/manual</code></pre>
<ol start="13" type="1">
<li>Install the architecture-specific packages. (If you don’t know what
platform group or architecture your system is, refer to Appendix B-i.
For the purposes of demonstration, I’m using sun4m.)</li>
</ol>
<pre><code># cd kvm

# tar -xpf /cdrom/export/exec/kvm/sun4m_sunos_4_1_4/kvm

# tar -xpf /cdrom/export/exec/kvm/sun4m_sunos_4_1_4/sys

14. Add the server and the client to the client&#39;s /etc/hosts file.

# cd ../../</code></pre>
<pre><code>./etc/hosts:
&lt;server ip address&gt; server
192.168.0.11 client</code></pre>
<ol start="15" type="1">
<li>Create the client’s /dev nodes.</li>
</ol>
<pre><code># cd dev

# sed -i &#39;s|^PATH=|PATH=/sbin:|g&#39; MAKEDEV

# ./MAKEDEV std

# ./MAKEDEV pty0

# ./MAKEDEV win

# cd ..</code></pre>
<ol start="16" type="1">
<li>Create the client’s /etc/fstab file.</li>
</ol>
<pre><code>./etc/fstab:
server:/home/client / nfs rw 0 0
server:/home/client/usr /usr nfs rw 0 0
swap /tmp tmp rw 0 0</code></pre>
<p><em>(Special note: At this time it would be ideal to also uncomment
the mount /tmp line in rc.local so that /tmp will be mounted and you can
use X11 and OpenWindows, among other things.)</em></p>
<ol start="17" type="1">
<li>Copy critical files to sbin and vmunix to the root directory.</li>
</ol>
<pre><code># cp usr/kvm/boot/* sbin

# cp usr/kvm/stand/sh sbin

# cp usr/bin/hostname sbin

# cp usr/kvm/stand/vmunix .</code></pre>
<ol start="18" type="1">
<li>Copy the tftp boot file to /tftpboot and symlink it to the proper
name for your system. (If you don’t know how to do this, refer to
Appendix B-iv.)</li>
</ol>
<pre><code># cp usr/kvm/stand/boot.sun4m /tftpboot

# cd /tftpboot

# ln -s boot.sun4m C0A8000B.SUN4M</code></pre>
<ol start="19" type="1">
<li>If all works out, at this point you should be able to tell the Sun
to boot into single user mode from the network.</li>
</ol>
<p><code>ok boot net -s</code></p>
<h3 id="on-the-sun"><em>On the Sun:</em></h3>
<ol start="20" type="1">
<li>Compile the source for the various utilities in the bigfs patch and
put them in their proper places.</li>
</ol>
<ul>
<li>/etc/dump</li>
<li>/etc/fsck</li>
<li>/usr/bin/df and /usr/5bin/df</li>
<li>/etc/fsirand</li>
<li>/etc/mkfs</li>
<li>/usr/etc/quotacheck</li>
</ul>
<p><em>(fsusageck.c will fail to compile but it doesn’t seem to be
necessary, as I don’t actually find it anywhere in the system.)</em></p>
<ol start="21" type="1">
<li>Apply the NFS Jumbo Patch.</li>
</ol>
<pre><code># cd /path/to/nfs/patch

# cp /usr/kvm/sys/`arch -k`/OBJ/nfs_client.o /usr/kvm/sys/`arch -k`/OBJ/nfs_client.old

`# cp `arch -k`/nfs_client.o /usr/kvm/sys/\`arch -k`/OBJ/nfs_client.o

# cp /usr/kvm/sys/`arch -k`/OBJ/nfs_server.o /usr/kvm/sys/`arch -k`/OBJ/nfs_server.old

# cp `arch -k`/nfs_server.o /usr/kvm/sys/`arch -k`/OBJ/nfs_server.o

# cp /usr/kvm/sys/`arch -k`/OBJ/nfs_vnodeops.o /usr/kvm/sys/`arch -k`/OBJ/nfs_vnodeops.old

# cp `arch -k`/nfs_vnodeops.o /usr/kvm/sys/`arch -k`/OBJ/nfs_vnodeops.o</code></pre>
<ol start="22" type="1">
<li>Recompile the kernel.</li>
</ol>
<pre><code># cd /sys/`arch -k`/conf

# cp GENERIC GENERIC.1

# config GENERIC.1

# cd ../GENERIC.1

# make

# cp /vmunix /vmunix.save

# cp vmunux /vmunix</code></pre>
<ol start="23" type="1">
<li>Reboot into multi-user mode this time. If everything was done
correctly it should boot fully and you can login as root without it
panicking. (Note: if your default boot device is set to something other
than net, you should <code>halt</code> instead of reboot and then issue
the <code>boot net</code> command at the OpenBoot “ok” prompt.)</li>
</ol>
<h2 id="ii.-solaris-diskful-install">II. Solaris Diskful Install</h2>
<h2 id="ii-a.-solaris-b"><em>II-a. Solaris</em> <a href="#fn2"
class="footnote-ref" id="fnref2"
role="doc-noteref"><sup>2</sup></a></h2>
<ol type="1">
<li>Create a directory where you want the server to place the Solaris
install files.</li>
</ol>
<p><code># mkdir /var/Solaris</code></p>
<ol start="2" type="1">
<li>Navigate to the Tools directory on the install disc.</li>
</ol>
<p><code># cd /path/to/Tools</code></p>
<ol start="3" type="1">
<li>Run the setup_install_server script and direct it to the directory
created in Step 1</li>
</ol>
<p><code># ./setup_install_server /var/Solaris</code></p>
<p><em>Special note for those making a Solaris 10 install server: There
has been behavior observed by <a
href="https://www.nick99nack.com/">nick99nack</a> that, when Solaris 10
is installed on a ZFS pool, you may be unable to export the install
directory on account of it “is not a local filesystem.” If that is an
issue that you run into, use the solution he provided me below to create
a UFS-formatted file that can be mounted as a loop device:</em></p>
<pre><code># mkfile 10g /var/jumpstart.img [you can put it anywhere]
# lofiadm -a /var/jumpstart.img
# newfs /dev/lofi/1
# mount /dev/lofi/1 /var/Solaris</code></pre>
<ol start="4" type="1">
<li><p>If your distribution of Solaris comes on multiple discs, you will
need to, at this point, eject the first disc and put in the second disc.
Volume Manager should mount the disc for you.</p></li>
<li><p>Navigate to the Tools directory on the new disc and run the
add_to_install_server script</p></li>
</ol>
<p><code># ./add_to_install_server /var/Solaris</code></p>
<ol start="6" type="1">
<li><p>Repeat this as many times as necessary.</p></li>
<li><p>Create or modify the /etc/ethers file with your Sun’s ethernet
address and hostname:</p></li>
</ol>
<pre><code>/etc/ethers:
8:0:20:c0:ff:ee installclient</code></pre>
<ol start="8" type="1">
<li>Modify /etc/hosts with the hostname you specified in /etc/ethers and
the IP address you wish to assign your client</li>
</ol>
<pre><code>/etc/hosts:
...
192.168.0.10 installclient</code></pre>
<ol start="9" type="1">
<li>Navigate to the Tools directory of the install server and run the
add_install_client script, specifying your client’s platform group and
hostname.</li>
</ol>
<p><code># ./add_install_client installclient sun4u</code></p>
<p><em>Special note for those making a Solaris 10 install server to boot
Solaris 9 or earlier: You need to run the inetconv command to make the
changes the script made to your inetd.conf file reflect in the actual
settings of the smf service!</em></p>
<p><code># inetconv</code></p>
<ol start="10" type="1">
<li>If everything went according to plan, you can tell your Sun
workstation to boot from the network and it will boot into the Solaris
installer.</li>
</ol>
<p><code>ok boot net</code></p>
<h2 id="iii.-nextstepopenstep-diskful-install">III. NeXTSTEP/OPENSTEP
Diskful Install</h2>
<h2 id="iii-a.-netbsdopenbsd"><em>III-a. NetBSD/OpenBSD</em></h2>
<ol type="1">
<li>Ensure you have the following services enabled in your rc.conf:</li>
</ol>
<ul>
<li>rarpd</li>
<li>bootparams (called bootparamd in rc.conf, but refered to as
bootparams elsewhere)</li>
<li>tftpd (part of inetd, enabled by uncommenting the tftpd line in
/etc/inetd.conf)</li>
<li>bootps (part of inetd, enabled by uncommenting the bootps line in
/etc/inetd.conf) or dhcpd</li>
<li>nfs_server (in addition to rpcbind, mountd, lockd, and statd)</li>
</ul>
<ol start="2" type="1">
<li>Create or modify the /etc/ethers file with your Sun’s ethernet
address and hostname:</li>
</ol>
<pre><code>/etc/ethers:
08:00:20:c0:ff:ee installclient</code></pre>
<ol start="3" type="1">
<li>Modify /etc/hosts with the hostname you specified in /etc/ethers and
the IP address you wish to assign your client</li>
</ol>
<pre><code>/etc/hosts:
...
192.168.0.10 installclient</code></pre>
<ol start="4" type="1">
<li>Make the /tftpboot directory if it doesn’t already exist.</li>
</ol>
<p><code># mkdir /tftpboot</code></p>
<ol start="5" type="1">
<li>Make a directory where you wish to put the contents of the install
CD.</li>
</ol>
<p><code># mkdir -p /export/installcd</code></p>
<ol start="6" type="1">
<li>Mount the install CD.</li>
</ol>
<p><code># mount -t ufs -o ro,ufstype=nextstep-cd /dev/cd0 /mnt</code></p>
<ol start="7" type="1">
<li>Copy the contents of the CD you mounted in the previous step to the
directory you created in Step 5.</li>
</ol>
<p><code># cp -a /mnt/* /export/installcd</code></p>
<ol start="7" type="1">
<li>Symbolically link the Sun boot file to the /tftpboot directory,
where the name is your Sun’s IP address represented in hexadecimal
followed by your platform group. (If you don’t know how to do this,
please see Appendix B-iv. If you don’t know your platform group, please
refer to Appendix B-i.)</li>
</ol>
<p><code># ln -s /export/installcd/private/tftpboot/sparc/bootnet /tftpboot/C0A8000A.SUN4M</code></p>
<ol start="8" type="1">
<li>Create or modify the /etc/dhcpd.conf file.</li>
</ol>
<pre><code>/etc/dhcpd.conf:
deny unknown-clients;
allow bootp;
subnet 192.168.0.0 netmask 255.255.255.0 {
range 192.168.0.100 192.168.0.150
}
group {
host installclient {
hardware ethernet 08:00:20:00:07:ea;
filename &quot;C0A8000B.SUN4M&quot;;
fixed-address installclient;
option root-path &quot;/export/installcd&quot;;
}
}
/etc/bootptab:
installclient:\
:ht=ether:\
:ha=080020C0FFEE:\
:sm=255.255.255.0:\
:lg=&lt;server ip address&gt;:\
:ip=192.168.0.10:\
:hn=installclient:\
:bf=C0A8000A.SUN4M:\
:bs=auto:\
:rp=/export/installcd/:\
:vm=auto:</code></pre>
<ol start="9" type="1">
<li>Create or modify the /etc/bootparams file.</li>
</ol>
<pre><code>/etc/bootparams:
installclient root=install.server.ip.address:/export/installcd private=install.server.ip.address:/export/installcd/private</code></pre>
<ol start="10" type="1">
<li>Add the location of the copied install CD to /etc/exports.</li>
</ol>
<pre><code>/etc/exports:
/export/installcd -mapall=root -alldirs</code></pre>
<ol start="11" type="1">
<li>Restart all services listed in Step 1.</li>
</ol>
<p>**If you enabled tftpd and/or bootpd, be sure to restart inetd.*</p>
<ol start="12" type="1">
<li>If all works out, at this point you should be able to tell the Sun
to boot from the network and it’ll boot into the install CD.</li>
</ol>
<p><code>ok boot net</code></p>
<h2 id="appendix-a-programming-the-idprom-d">Appendix A: Programming the
IDPROM <a href="#fn3" class="footnote-ref" id="fnref3"
role="doc-noteref"><sup>3</sup></a></h2>
<h2
id="a-i.-what-is-the-nvram-idprom-hostid-and-ethernet-address-and-why-is-it-important"><em>A-i.
What is the NVRAM, IDPROM, hostid, and ethernet address, and why is it
important?</em></h2>
<p>Before proceeding, a warning: improper use of the OpenBoot PROM
console can brick your system. I know the information contained in this
document to be correct, but I cannot guarantee you won’t brick your
machine if you go beyond what I talk about here. Proceed with caution.
This is not to scare you, but to inform you.</p>
<p>Your Sun’s NVRAM and IDPROM hold firmware configuration settings.
This includes the default boot device, diagnostic behavior, default
display device, and, perhaps most importantly for this guide, your
ethernet address and hostid.</p>
<p>If you’re reading this section of the guide (and, honestly, in
general), it’s likely that your Sun’s NVRAM battery is dead. This means
three important things: a) your Sun will always boot up in diagnostic
mode (causing it to try unsuccessfully to boot from the network), b)
your IDPROM information will be invalid, and c) any changes you make to
settings will be cleared after you turn your machine off. This is a
guide all about network booting and, with an invalid ethernet address,
you can’t do a lot. So, with that in mind, let’s look at the makeup of
the IDPROM data:</p>
<p>Byte(s) Contents 0 Always 01 1 First byte of hostid (machine type -
for ease of use you can use real-machine-type, but that may not work on
older boot proms. DO NOT SET THIS TO A MACHINE TYPE THAT IS NOT YOUR
MACHINE’S TYPE) 2-7 6 byte ethernet address (first three bytes are 08,
00, 20) 8-b Date of manufacture (all 0s, doesn’t matter) c Second byte
of hostid d Third byte of hostid e Fourth byte of hostid f IDPROM
checksum (bitwise xor of bytes 0-e)</p>
<h2 id="a-ii.-a-crash-course-in-idprom-programming"><em>A-ii. A crash
course in IDPROM programming</em></h2>
<p>To program your ethernet address to 8:0:20:c0:ff:ee and your hostid
to 80coffee on a sun4m machine based on the table above:</p>
<pre><code>1 0 mkp
real-machine-type 1 mkp
8 2 mkp
0 3 mkp
20 4 mkp
c0 5 mkp
ff 6 mkp
ee 7 mkp
0 8 mkp
0 9 mkp
0 a mkp
0 b mkp
c0 c mkp
ff d mkp
ee e mkp
0 f 0 do i idprom@ xor loop f mkp</code></pre>
<p>If you’re on a SPARCserver 1000, type
<code>update-system-idprom</code> at the “ok” prompt.</p>
<p>There is also another way to set the idprom on some revisions of the
OBP: <code>8 0 20 c0 ff ee 80c0ffee mkpl</code> and hitting Return
followed by hitting CTRL+D followed by CTRL+R. If it gives no output and
returns you to the <code>ok</code> prompt, it has succeeded. If it shows
a Sun Microsystems copyright, it has failed. This is sometimes due to
the idprom not being invalidated before running the command. If this is
the case, run <code>f idprom@ 1 xor f mkp</code> and hit Return, then
trying the invocation again. If that still doesn’t work, then try the
method listed above.</p>
<p>Reset the machine with the <code>reset</code> command and it should
reboot with the new ethernet address and hostid.</p>
<h2 id="a-iii.-hostid-machine-type-listing"><em>A-iii. Hostid Machine
Type Listing</em></h2>
<table>
<thead>
<tr>
<th>First Byte of hostid</th>
<th>Machine</th>
</tr>
</thead>
<tbody>
<tr>
<td>01</td>
<td>2/1x0</td>
</tr>
<tr>
<td>02</td>
<td>2/50</td>
</tr>
<tr>
<td>11</td>
<td>3/160</td>
</tr>
<tr>
<td>12</td>
<td>3/50</td>
</tr>
<tr>
<td>13</td>
<td>3/2x0</td>
</tr>
<tr>
<td>14</td>
<td>3/110</td>
</tr>
<tr>
<td>17</td>
<td>3/60</td>
</tr>
<tr>
<td>18</td>
<td>3/e</td>
</tr>
<tr>
<td>21</td>
<td>4/2x0</td>
</tr>
<tr>
<td>22</td>
<td>4/1x0</td>
</tr>
<tr>
<td>23</td>
<td>4/3x0</td>
</tr>
<tr>
<td>24</td>
<td>4/4x0</td>
</tr>
<tr>
<td>31</td>
<td>386i</td>
</tr>
<tr>
<td>41</td>
<td>3/4x0</td>
</tr>
<tr>
<td>42</td>
<td>3/80</td>
</tr>
<tr>
<td>51</td>
<td>SPARCstation 1 (4/60)</td>
</tr>
<tr>
<td>52</td>
<td>SPARCstation IPC (4/40)</td>
</tr>
<tr>
<td>53</td>
<td>SPARCstation 1+ (4/65)</td>
</tr>
<tr>
<td>54</td>
<td>SPARCstation SLC (4/20)</td>
</tr>
<tr>
<td>55</td>
<td>SPARCstation 2 (4/75)</td>
</tr>
<tr>
<td>56</td>
<td>SPARCstation ELC</td>
</tr>
<tr>
<td>57</td>
<td>SPARCstation IPX (4/50)</td>
</tr>
<tr>
<td>61</td>
<td>4/e</td>
</tr>
<tr>
<td>71</td>
<td>4/6x0</td>
</tr>
<tr>
<td>72</td>
<td>SPARCstation 10 or SPARCstation 20</td>
</tr>
<tr>
<td>80</td>
<td>SPARCclassic, LX, 4, 5, SPARCserver 1000, Voyager, Ultra, Blade</td>
</tr>
</tbody>
</table>
<h2
id="appendix-b-platform-groups-useful-openboot-settings-and-other-errata">Appendix
B: Platform Groups, useful OpenBoot settings, and other errata</h2>
<h2 id="b-i.-platform-group-listing-a"><em>B-i. Platform Group
listing:</em> <a href="#fn4" class="footnote-ref" id="fnref4"
role="doc-noteref"><sup>4</sup></a></h2>
<p>These are the platform groups for many of the SPARC systems you may
encounter:</p>
<table>
<thead>
<tr>
<th>Model</th>
<th>Platform Group</th>
</tr>
</thead>
<tbody>
<tr>
<td>4/2x0</td>
<td>sun4</td>
</tr>
<tr>
<td>4/1x0</td>
<td>sun4</td>
</tr>
<tr>
<td>4/3x0</td>
<td>sun4</td>
</tr>
<tr>
<td>4/4x0</td>
<td>sun4</td>
</tr>
<tr>
<td>SPARCstation 1/1+</td>
<td>sun4c</td>
</tr>
<tr>
<td>SPARCstation 2</td>
<td>sun4c</td>
</tr>
<tr>
<td>SPARCstation 10/20</td>
<td>sun4m</td>
</tr>
<tr>
<td>SPARCstation 5/4</td>
<td>sun4m</td>
</tr>
<tr>
<td>SPARCstation IPC/IPX</td>
<td>sun4c</td>
</tr>
<tr>
<td>SPARCclassic/SPARCstation LX/ZX</td>
<td>sun4m</td>
</tr>
<tr>
<td>SPARCclassic X</td>
<td>sun4m</td>
</tr>
<tr>
<td>Ultra 1</td>
<td>sun4u</td>
</tr>
<tr>
<td>Ultra 1E</td>
<td>sun4u</td>
</tr>
<tr>
<td>Ultra 2</td>
<td>sun4u</td>
</tr>
<tr>
<td>Ultra 30</td>
<td>sun4u</td>
</tr>
<tr>
<td>Ultra 5/10</td>
<td>sun4u</td>
</tr>
<tr>
<td>Ultra 60</td>
<td>sun4u</td>
</tr>
<tr>
<td>Ultra 80</td>
<td>sun4u</td>
</tr>
<tr>
<td>Blade 1000</td>
<td>sun4u</td>
</tr>
<tr>
<td>Blade 2000</td>
<td>sun4u</td>
</tr>
<tr>
<td>Blade 100/150</td>
<td>sun4u</td>
</tr>
<tr>
<td>Blade 2500 (Silver)</td>
<td>sun4u</td>
</tr>
<tr>
<td>Blade 1500 (Silver)</td>
<td>sun4u</td>
</tr>
<tr>
<td>Netra T1</td>
<td>sun4u</td>
</tr>
<tr>
<td>SPARCserver 1000</td>
<td>sun4d</td>
</tr>
<tr>
<td>SPARCserver 3x0/4x0</td>
<td>sun4</td>
</tr>
<tr>
<td>SPARCserver 6x0MP</td>
<td>sun4m</td>
</tr>
<tr>
<td>Ultra Enterprise/UltraSPARC-based Fire V-seies</td>
<td>sun4u</td>
</tr>
<tr>
<td>Fire T1000/T2000</td>
<td>sun4v</td>
</tr>
<tr>
<td>Fire T5120/T5220</td>
<td>sun4v</td>
</tr>
<tr>
<td>Fire T5140/T5240/T5440</td>
<td>sun4v</td>
</tr>
<tr>
<td>x86</td>
<td>i86pc</td>
</tr>
</tbody>
</table>
<h2 id="b-ii.-operating-system-compatibility-matrix"><em>B-ii. Operating
system compatibility matrix</em></h2>
<p>This is a compatibility matrix for operating systems on Sun systems.
This information is correct to the best of my knowledge, but may become
outdated over time.</p>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr>
<th>System</th>
<th>Compatible Operating Systems</th>
</tr>
</thead>
<tbody>
<tr>
<td>Sun-1</td>
<td>Sun UNIX 0.7</td>
</tr>
<tr>
<td>Sun-2</td>
<td>SunOS 1.0 - 4.0.1, NetBSD (Tier II)</td>
</tr>
<tr>
<td>Sun-3</td>
<td>SunOS 3.0 - 4.1.1_U1, NetBSD (Tier II), OpenBSD (up to 2.9)</td>
</tr>
<tr>
<td>sun4</td>
<td>SunOS 4.0.3e - 4.1.4, Solaris 2.0 - 7, NetBSD (Tier II), OpenBSD (up
to 5.9)</td>
</tr>
<tr>
<td>sun4c</td>
<td>SunOS 4.1.2 - 4.1.4, Solaris 2.1 - 7, NetBSD (Tier II), OpenBSD (up
to 5.9)</td>
</tr>
<tr>
<td>sun4d</td>
<td>Solaris 2.2 - 8</td>
</tr>
<tr>
<td>sun4m</td>
<td>SunOS 4.1.2 - 4.1.4, Solaris 2.1 - 9, NetBSD (Tier II), OpenBSD (up
to 5.9), NeXTSTEP 3.3 and OPENSTEP 4.x (SuperSPARC and microSPARC CPUs
only)</td>
</tr>
<tr>
<td>sun4u</td>
<td>Solaris 2.5 - 10 (7 is first 64-bit release), NetBSD (Tier I),
OpenBSD</td>
</tr>
<tr>
<td>sun4v</td>
<td>Solaris 10 3/05 HW2 and newer and OpenBSD</td>
</tr>
<tr>
<td>SPARCserver 600MP</td>
<td>SunOS 4.1.2 - 4.1.4, Solaris 2.1 - 2.5.1, NetBSD (Tier II), OpenBSD
(up to 5.9)</td>
</tr>
<tr>
<td>UltraSPARC I</td>
<td>Solaris 2.5 - 9 (7 is first 64-bit release), NetBSD (Tier I),
OpenBSD</td>
</tr>
</tbody>
</table>
<h2 id="b-iii.-useful-openboot-settings"><em>B-iii. Useful OpenBoot
settings</em></h2>
<h3 id="b-ii-a.-diag-switch">B-ii-a. diag-switch?</h3>
<p>This determines if the system goes through an extended self-test
during startup. It also sets the default boot device to the network by
default while this setting is set to true. It will be set to true by
default every time you turn on your system on if the timekeeper battery
is dead. I would recommend setting this to false to shorten the time it
takes to subsequently reboot. ### B-ii-b. auto-boot? This determines if
the system tries to auto-boot upon startup. This is set to true by
default. It’s a matter of personal preference whether it’s enabled or
not. I prefer to boot to the OpenBoot prompt and then choose my boot
device from there. Be aware this setting will be largely inconsequential
when you cold boot the system if the timekeeper battery is dead. ###
B-ii-c. boot-device This controls what the default setting is when the
boot command is issued with no arguments. The default is for it to try
booting from disk first and then from the network. Like auto-boot? It’s
a largely inconsequential setting if your timekeeper battery is dead.
### B-ii-d. output-device I put this here because sometimes you don’t
want the default output device to be what the firmware defaults to, or
you want to change settings for the default output device. This setting
allows you to specify the default output device (generally screen or
ttya by default depending on if you have a keyboard attached or not) and
any settings for said output device (I set my framebuffer to run at
1024x768x60 using this setting, for instance). ## <em>B-iv. Using
lofiadm to mount iso images.</em> In some versions of Solaris (I’ve
tested with Solaris 10, but it may exist in other versions as well)
there exists the lofiadm utility. This exists as a way to work with
loopback files (disc/k image files). For the purposes of this guide, we
will be looking at using it to mount CD images.</p>
<p>You can invoke the lofiadm utility with the following:</p>
<p><code># lofiadm -a /path/to/image.iso</code></p>
<p>This will add the iso file as a loopback filesystem on the first
available lofi device. You can also specify a lofi device, like so
(where n is the lofi device number):</p>
<p><code># lofiadm -a /path/to/image.iso /dev/lofi/n</code></p>
<p>The output of either of these commands will return the lofi device
that the iso file was added to. You can then mount the device like so
(where n is the lofi device number):</p>
<p><code># mount -F hsfs -o ro /dev/lofi/n /mnt</code></p>
<p>You can also combine both commands together:</p>
<p><code># mount -F hsfs -o ro ``lofiadm -a /path/to/image.iso`` /mnt</code></p>
<h2 id="b-v.-naming-your-tftp-boot-file."><em>B-v. Naming your tftp boot
file.</em></h2>
<p>This is a short and simple guide for how to name your Sun’s tftp boot
file, which needs to be named in a specific way.</p>
<p>Sun workstations require the tftp boot file to be named for their IP
address represented in hexadecimal followed by their platform group.</p>
<p>First, you need to determine your IP address in hexadecimal. This can
be done with the bc command.</p>
<p>Secondly, you need to determine your platform group. See Appendix B-i
for more information. For the sake of this demonstration, I’ll be
choosing the sun4u platform group.</p>
<pre><code># bc
obase=16
192
C0
168
A8
0
0
10
A</code></pre>
<p>Thirdly, you must symbolically link the boot file to your /tftpboot
directory.</p>
<p><code># ln -s /path/to/boot/file /tftpboot/C0A8000A.SUN4U</code></p>
<h2 id="appendix-c-cited-works-and-further-reading">Appendix C: Cited
works and further reading</h2>
<h2 id="c-i.-cited-works"><em>C-i. Cited works</em></h2>
<p>All cited works are also linked in the document.</p>
<p><a
href="http://tenox.pdp-11.ru/os/sunos_solaris/sparc/Installing%20Solaris%20Over%20The%20Network.html">Installing
Solaris Over the Network - hosted on tenox.pdp-11.ru</a></p>
<p><a href="http://www.obsolyte.com/sunFAQ/faq_nvram.html">FAQ:
Frequently Asked Questions about Sun NVRAM, IDPROM, hostid</a></p>
<p><a href="https://www.panix.com/~rawallis/sunos41_diskless.html">SunOS
4.1 Diskless Installation Guide</a></p>
<h2 id="c-ii.-further-reading"><em>C-ii. Further reading</em></h2>
<p><a href="https://www.netbsd.org/docs/network/netboot/">NetBSD
Diskless HOW-TO pages</a></p>
<p><a href="https://man.openbsd.org/diskless">diskless(8) OpenBSD man
page</a></p>
<section id="footnotes" class="footnotes footnotes-end-of-document"
role="doc-endnotes">
<hr />
<ol>
<li id="fn1"><p><a
href="http://www.obsolyte.com/sunFAQ/faq_nvram.html">FAQ: Frequently
Asked Questions about Sun NVRAM, IDPROM, hostid</a><a href="#fnref1"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p><a
href="http://tenox.pdp-11.ru/os/sunos_solaris/sparc/Installing%20Solaris%20Over%20The%20Network.html">Installing
Solaris Over the Network - hosted on tenox.pdp-11.ru</a><a
href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p><a
href="https://www.panix.com/~rawallis/sunos41_diskless.html">SunOS 4.1
Diskless Installation Guide</a><a href="#fnref3" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p><a
href="http://tenox.pdp-11.ru/os/sunos_solaris/sparc/Installing%20Solaris%20Over%20The%20Network.html">Installing
Solaris Over the Network - hosted on tenox.pdp-11.ru</a><a
href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>
</body>
</html>
